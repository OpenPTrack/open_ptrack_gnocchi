<?xml version="1.0"?>
<!-- SESSION ID: 1500506803 -->
<launch>

  <arg name="enable_people_tracking" default="true" />
  <arg name="enable_pose" default="true" />
  <arg name="enable_object" default="true" />
  <arg name="sensor_name" default="azure_head" />
  <arg name="sensor_type" default="azure" />
  <arg name="yolo_based_people_tracking" default="false" />
  <!-- Load calibration results -->
  <!--include file="$(find opt_calibration)/launch/opt_calibration_results.launch"/-->

  <include file="$(find azure_kinect_ros_driver)/launch/driver.launch" ns="$(arg sensor_name)">
    <arg name="rgb_point_cloud" value="false" />
    <arg name="depth_mode" value="NFOV_UNBINNED" />
    <arg name="color_resolution" value="720P" />
    <arg name="fps" value="30" />
  </include>

  <group if="$(arg enable_people_tracking)">
    <!-- People tracking -->
    <include file="$(find detection)/launch/detector_depth_azure.launch"/>
    <include file="$(find tracking)/launch/tracker_single.launch"/>
  </group>

  <group if="$(arg enable_pose)">
    <!-- Skeleton tracking -->
    <include file="$(find detection)/launch/skeleton_detector_azure.launch">
      <arg name="sensor_name" value="$(arg sensor_name)" />
    </include>
    <include file="$(find tracking)/launch/skeleton_tracker_single.launch">
      <arg name="input_topic" value="/detector/skeletons" />
    </include>
    <!-- Pose recognition -->
    <include file="$(find pose_recognition)/launch/pose_recognition.launch" />
  </group>

  <group if="$(arg enable_object)">
  <!-- Object Tracking -->
    <include file="$(find yolo_detector)/launch/detect_yolo_object_azure_network.launch">
      <arg name="sensor_name" value="$(arg sensor_name)" />
    </include>
    <include file="$(find tracking)/launch/object_tracker_single.launch" />
  </group>

  <!-- UDP messaging -->
  <include file="$(find opt_utils)/launch/ros2udp_converter.launch"/>

  <!-- Visualization -->
  <include file="$(find opt_utils)/launch/singlecamera_visualization.launch"/>
</launch>
